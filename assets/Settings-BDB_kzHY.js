import{r as m,j as s,B as t,a as f}from"./index-3JB24okO.js";/* empty css                      */const P="_settingsPage_1nrqw_1",h="_formCard_1nrqw_27",p="_formTitle_1nrqw_53",v="_input_1nrqw_75",x="_button_1nrqw_97",b="_saveButton_1nrqw_131",j="_cancelButton_1nrqw_147",e={settingsPage:P,formCard:h,formTitle:p,input:v,button:x,saveButton:b,cancelButton:j},$=()=>{const[r,l]=m.useState({oldPassword:"",newPassword:"",confirmPassword:""}),[a,i]=m.useState({}),d=o=>{l({...r,[o.target.id]:o.target.value})},w=()=>{const o={};return r.oldPassword||(o.oldPassword="كلمة السر القديمة مطلوبة."),(!r.newPassword||!r.newPassword.match(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/))&&(o.newPassword="كلمة السر يجب أن تحتوي على 8 أحرف على الأقل، وتحتوي على حرف كبير وحرف صغير ورقم ورمز."),r.newPassword!==r.confirmPassword&&(o.confirmPassword="كلمة السر وتأكيدها غير متطابقين."),o},u=async o=>{o.preventDefault();const c=w();if(Object.keys(c).length>0){i(c);return}i({});try{const n=localStorage.getItem("authToken");if(!n){t.error("فشل المصادقة. لم يتم العثور على الرمز.");return}(await f.patch("https://htihousing-eel315fa.b4a.run/auth/dashboard/change-password",{oldPassword:r.oldPassword,newPassword:r.newPassword,confirmPassword:r.confirmPassword},{headers:{token:`${n}`}})).status===200?(t.success("تم تغيير كلمة السر بنجاح."),l({oldPassword:"",newPassword:"",confirmPassword:""})):t.error("حدث خطأ أثناء تغيير كلمة السر.")}catch(n){t.error(`${n.response.data.message}`),console.error(n)}};return s.jsx("div",{className:"container",children:s.jsx("div",{className:`${e.settingsPage}`,children:s.jsx("div",{className:"row justify-content-center",children:s.jsx("div",{className:"col-xl-4 col-lg-6 col-md-8 col-12",children:s.jsxs("div",{className:`${e.formCard}`,children:[s.jsx("h2",{className:`${e.formTitle} text-center`,children:"تغيير كلمة السر"}),s.jsxs("form",{onSubmit:u,children:[s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"oldPassword",className:"form-label",children:"كلمة السر القديمة"}),s.jsx("input",{type:"password",id:"oldPassword",value:r.oldPassword,onChange:d,className:`form-control ${e.input} ${a.oldPassword?"is-invalid":""}`}),a.oldPassword&&s.jsx("div",{className:"invalid-feedback",children:a.oldPassword})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"newPassword",className:"form-label",children:"كلمة السر الجديدة"}),s.jsx("input",{type:"password",id:"newPassword",value:r.newPassword,onChange:d,className:`form-control ${e.input} ${a.newPassword?"is-invalid":""}`}),a.newPassword&&s.jsx("div",{className:"invalid-feedback",children:a.newPassword})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx("label",{htmlFor:"confirmPassword",className:"form-label",children:"تأكيد كلمة السر"}),s.jsx("input",{type:"password",id:"confirmPassword",value:r.confirmPassword,onChange:d,className:`form-control ${e.input} ${a.confirmPassword?"is-invalid":""}`}),a.confirmPassword&&s.jsx("div",{className:"invalid-feedback",children:a.confirmPassword})]}),s.jsx("button",{type:"submit",className:`btn btn-primary rounded-pill ${e.button}`,children:"تغيير"})]})]})})})})})};export{$ as default};
